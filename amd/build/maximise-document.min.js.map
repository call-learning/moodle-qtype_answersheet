{"version":3,"file":"maximise-document.min.js","sources":["../src/maximise-document.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Maximise a document height\n *\n * Inspired from M.util.init_maximised_embed\n * @module     qtype_answersheet/maximise-document.js\n * @copyright   2021 Laurent David <laurent@call-learning.fr>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Get the size of an HTML element.\n * @param {number} elid\n * @param {string} prop\n * @return {number}\n */\nconst getHtmlElementSize = (elid, prop) => {\n    const el = document.getElementById(elid);\n    // Ensure element exists.\n    if (el) {\n        let val = el.getStyle(prop);\n        if (val === 'auto') {\n            val = el.getComputedStyle(prop);\n        }\n        val = parseInt(val);\n        if (isNaN(val)) {\n            return 0;\n        }\n        return val;\n    } else {\n        return 0;\n    }\n};\n\nconst resizeObjectHeight = (obj) => {\n    obj.style.display = 'none';\n    var headerheight = getHtmlElementSize('#page-header', 'height');\n    var footerheight = getHtmlElementSize('#page-footer', 'height');\n    var newheight = parseInt(Y.one('body').get('docHeight')) - footerheight - headerheight - 100;\n    if (newheight < 400) {\n        newheight = 400;\n    }\n    obj.style.height =  newheight + 'px';\n    obj.style.display = '';\n};\n\n\nexport default (documentid) => {\n    const obj = document.getElementById(documentid);\n    resizeObjectHeight(obj);\n    // Fix layout if window resized too.\n    window.addEventListener('resize', () => {\n        resizeObjectHeight(obj);\n    });\n};"],"names":["getHtmlElementSize","elid","prop","el","document","getElementById","val","getStyle","getComputedStyle","parseInt","isNaN","resizeObjectHeight","obj","style","display","headerheight","footerheight","newheight","Y","one","get","height","documentid","window","addEventListener"],"mappings":";;;;;;;;;MA8BMA,mBAAqB,CAACC,KAAMC,cACxBC,GAAKC,SAASC,eAAeJ,SAE/BE,GAAI,KACAG,IAAMH,GAAGI,SAASL,YACV,SAARI,MACAA,IAAMH,GAAGK,iBAAiBN,OAE9BI,IAAMG,SAASH,KACXI,MAAMJ,KACC,EAEJA,WAEA,GAITK,mBAAsBC,MACxBA,IAAIC,MAAMC,QAAU,WAChBC,aAAef,mBAAmB,eAAgB,UAClDgB,aAAehB,mBAAmB,eAAgB,UAClDiB,UAAYR,SAASS,EAAEC,IAAI,QAAQC,IAAI,cAAgBJ,aAAeD,aAAe,IACrFE,UAAY,MACZA,UAAY,KAEhBL,IAAIC,MAAMQ,OAAUJ,UAAY,KAChCL,IAAIC,MAAMC,QAAU,4BAIRQ,mBACNV,IAAMR,SAASC,eAAeiB,YACpCX,mBAAmBC,KAEnBW,OAAOC,iBAAiB,UAAU,KAC9Bb,mBAAmBC"}